import{L as j}from"./index-D6YI7NWh.js";import{T as S,r as c,o as d,c as h,a as o,g as U,w as r,d as w,F as y,b as t,t as u,f,e as a}from"./app-B3zO_ILq.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focus-management-C4nM2lYB.js";import"./keyboard-DTUPi9Wy.js";import"./disposables-BnUz9YMx.js";import"./description-BoEneSfX.js";const N={name:"UsersCreateEdit",layout:j,props:{states:{type:Object,required:!1,default:()=>{}},timezoneOptions:{type:Object,required:!0},user:{type:Object,required:!1,default:()=>{}}},data(){return{form:S({name:"",email:"",phone_number:"",birthdate:"",address_line_1:"",address_line_2:"",city:"",state_id:"",zip_code:"",timezone:"",gender:"",height:"",weight:""})}},watch:{user:{handler(i){!i||!i.data||(this.form.name=i.data.name,this.form.email=i.data.email,this.form.phone_number=i.data.phone_number,this.form.birthdate=i.data.birthdate,this.form.address_line_1=i.data.address_line_1,this.form.address_line_2=i.data.address_line_2,this.form.city=i.data.city,this.form.state_id=i.data.state_id,this.form.zip_code=i.data.zip_code,this.form.timezone=i.data.timezone,this.form.gender=i.data.gender,this.form.height=i.data.height,this.form.weight=i.data.weight)},immediate:!0}},methods:{submitForm(){this.form.clearErrors(),this.user&&this.user.data&&this.user.data.user_id?this.updateRequest():this.storeRequest()},storeRequest(){this.form.post(this.route("panel.patients.store"),{onSuccess:()=>this.$toast().success("User created successfully!"),onError:i=>{Object.keys(i).forEach(s=>{const m=i[s];this.$toast().error(m)})}})},updateRequest(){this.form.patch(this.route("panel.patients.update",{patient:this.user.data.user_id}),{onSuccess:()=>this.$toast().success("User updated successfully!"),onError:i=>{Object.keys(i).forEach(s=>{const m=i[s];this.$toast().error(m)})}})},deleteRequest(){this.$alert().confirm(()=>new Promise((i,s)=>{this.form.delete(this.route("panel.patients.destroy",{patient:this.user.data.user_id}),{onSuccess:()=>{this.$toast().success("User deleted successfully!"),i()},onError:m=>{Object.keys(m).forEach(x=>{const e=m[x];this.$toast().error(e)}),s()}})}))}}},P={class:"h-full flex flex-col"},R={key:0,class:"flex gap-2"},B={class:"grid grid-cols-1 divide-y divide-gray-200 gap-12 pb-12"},D=["value"];function L(i,s,m,x,e,z){const C=c("v-inertia-head"),V=c("v-button"),E=c("v-section-heading"),b=c("v-content-body"),v=c("v-section-divider"),_=c("v-form-label"),g=c("v-form-input"),p=c("v-form-error"),n=c("v-form-group"),k=c("v-form-select"),O=c("v-form");return d(),h(y,null,[o(C,{title:m.user?`Editing '${m.user.data.name}' user.`:"Create User"},null,8,["title"]),U("div",P,[o(O,{onSubmit:w(z.submitForm,["prevent"])},{default:r(()=>[o(b,{class:"border-b border-gray-200"},{default:r(()=>[o(E,null,{title:r(()=>[m.user?(d(),h(y,{key:1},[t(" Editing '"+u(m.user.data.name)+"' patient. ",1)],64)):(d(),h(y,{key:0},[t(" Create Patient ")],64))]),description:r(()=>[m.user?(d(),h(y,{key:1},[t(" Change and/or modify the details for the patient. ")],64)):(d(),h(y,{key:0},[t(" Fill up the form below to create a new patient for the application. ")],64))]),actions:r(()=>[m.user&&this.$auth().can(["patient.destroy"])?(d(),h("div",R,[o(V,{color:"danger",disabled:e.form.processing,onClick:w(z.deleteRequest,["prevent"])},{default:r(()=>[t(" Delete Patient ")]),_:1},8,["disabled","onClick"])])):f("",!0)]),_:1})]),_:1}),U("div",B,[o(n,{class:"divide-y divide-gray-200"},{default:r(()=>[o(v,null,{default:r(()=>[t(" General Details ")]),_:1}),o(b,{class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-4"},{default:r(()=>[o(n,null,{default:r(()=>[o(_,null,{default:r(()=>[t("Name")]),_:1}),o(g,{type:"text",modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=l=>e.form.name=l),error:e.form.errors.name,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.name?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.name),1)]),_:1})):f("",!0)]),_:1}),o(n,null,{default:r(()=>[o(_,null,{default:r(()=>[t("Email")]),_:1}),o(g,{type:"text",modelValue:e.form.email,"onUpdate:modelValue":s[1]||(s[1]=l=>e.form.email=l),error:e.form.errors.email,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.email?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.email),1)]),_:1})):f("",!0)]),_:1}),o(n,null,{default:r(()=>[o(_,null,{default:r(()=>[t("Phone Number")]),_:1}),o(g,{type:"text",modelValue:e.form.phone_number,"onUpdate:modelValue":s[2]||(s[2]=l=>e.form.phone_number=l),error:e.form.errors.phone_number,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.phone_number?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.phone_number),1)]),_:1})):f("",!0)]),_:1}),o(n,null,{default:r(()=>[o(_,null,{default:r(()=>[t("Birthdate")]),_:1}),o(g,{type:"date",modelValue:e.form.birthdate,"onUpdate:modelValue":s[3]||(s[3]=l=>e.form.birthdate=l),error:e.form.errors.birthdate,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.birthdate?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.birthdate),1)]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1}),o(n,{class:"divide-y divide-gray-200"},{default:r(()=>[o(v,null,{default:r(()=>[t(" Location Details ")]),_:1}),o(b,{class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-4"},{default:r(()=>[o(n,{class:"md:col-span-2"},{default:r(()=>[o(_,null,{default:r(()=>[t("Address Line 1 ")]),_:1}),o(g,{type:"text",modelValue:e.form.address_line_1,"onUpdate:modelValue":s[4]||(s[4]=l=>e.form.address_line_1=l),error:e.form.errors.address_line_1,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.address_line_1?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.address_line_1),1)]),_:1})):f("",!0)]),_:1}),o(n,{class:"md:col-span-2"},{default:r(()=>[o(_,null,{default:r(()=>[t("Address Line 2")]),_:1}),o(g,{type:"text",modelValue:e.form.address_line_2,"onUpdate:modelValue":s[5]||(s[5]=l=>e.form.address_line_2=l),error:e.form.errors.address_line_2,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.address_line_2?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.address_line_2),1)]),_:1})):f("",!0)]),_:1}),o(n,null,{default:r(()=>[o(_,null,{default:r(()=>[t("City")]),_:1}),o(g,{type:"text",modelValue:e.form.city,"onUpdate:modelValue":s[6]||(s[6]=l=>e.form.city=l),error:e.form.errors.city,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.city?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.city),1)]),_:1})):f("",!0)]),_:1}),o(n,null,{default:r(()=>[o(_,null,{default:r(()=>[t("State")]),_:1}),o(k,{options:m.states.data.map(l=>({label:l.name,value:l.state_id})),error:e.form.errors.state_id,disabled:e.form.processing,modelValue:e.form.state_id,"onUpdate:modelValue":s[7]||(s[7]=l=>e.form.state_id=l)},null,8,["options","error","disabled","modelValue"]),e.form.errors.state_id?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.state_id),1)]),_:1})):f("",!0)]),_:1}),o(n,null,{default:r(()=>[o(_,null,{default:r(()=>[t("Zip Code")]),_:1}),o(g,{type:"text",modelValue:e.form.zip_code,"onUpdate:modelValue":s[8]||(s[8]=l=>e.form.zip_code=l),error:e.form.errors.zip_code,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.zip_code?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.zip_code),1)]),_:1})):f("",!0)]),_:1}),o(n,null,{default:r(()=>[o(_,null,{default:r(()=>[t("Timezone")]),_:1}),o(k,{options:Object.entries(m.timezoneOptions).map(([l,q])=>({label:q,value:l})),error:e.form.errors.timezone,disabled:e.form.processing,modelValue:e.form.timezone,"onUpdate:modelValue":s[9]||(s[9]=l=>e.form.timezone=l)},null,8,["options","error","disabled","modelValue"]),e.form.errors.timezone?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.timezone),1)]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1}),o(n,{class:"divide-y divide-gray-200"},{default:r(()=>[o(v,null,{default:r(()=>[t(" Personal Health Details ")]),_:1}),o(b,{class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-4"},{default:r(()=>[o(n,null,{default:r(()=>[o(_,null,{default:r(()=>[t("Gender")]),_:1}),o(k,{options:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}],error:e.form.errors.gender,disabled:e.form.processing,modelValue:e.form.gender,"onUpdate:modelValue":s[10]||(s[10]=l=>e.form.gender=l)},null,8,["error","disabled","modelValue"]),e.form.errors.gender?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.gender),1)]),_:1})):f("",!0)]),_:1}),o(n,null,{default:r(()=>[o(_,null,{default:r(()=>[t("Height")]),_:1}),o(g,{type:"text",modelValue:e.form.height,"onUpdate:modelValue":s[11]||(s[11]=l=>e.form.height=l),error:e.form.errors.height,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.height?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.height),1)]),_:1})):f("",!0)]),_:1}),o(n,null,{default:r(()=>[o(_,null,{default:r(()=>[t("Weight")]),_:1}),o(g,{type:"text",modelValue:e.form.weight,"onUpdate:modelValue":s[12]||(s[12]=l=>e.form.weight=l),error:e.form.errors.weight,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.weight?(d(),a(p,{key:0},{default:r(()=>[t(u(e.form.errors.weight),1)]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1})]),o(n,{class:"bg-gray-50 flex items-center justify-end gap-2 text-right border-t border-gray-200"},{default:r(()=>[o(b,{class:"flex gap-4"},{default:r(()=>[e.form.progress?(d(),h("progress",{key:0,value:e.form.progress.percentage,max:"100"},u(e.form.progress.percentage)+"% ",9,D)):f("",!0),o(V,{href:i.route("panel.patients.index"),color:"white",disabled:e.form.processing},{default:r(()=>[t(" Cancel ")]),_:1},8,["href","disabled"]),m.user?(d(),a(V,{key:2,disabled:e.form.processing},{default:r(()=>[t(" Save Changes ")]),_:1},8,["disabled"])):(d(),a(V,{key:1,disabled:e.form.processing},{default:r(()=>[t(" Create Patient ")]),_:1},8,["disabled"]))]),_:1})]),_:1})]),_:1},8,["onSubmit"])])],64)}const I=F(N,[["render",L]]);export{I as default};
