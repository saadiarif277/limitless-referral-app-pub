import{L as F}from"./index-D6YI7NWh.js";import{T as N,r as i,o as c,c as l,a as o,w as t,d as R,F as _,b as r,t as m,g as k,e as u,f as p,l as B}from"./app-B3zO_ILq.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focus-management-C4nM2lYB.js";import"./keyboard-DTUPi9Wy.js";import"./disposables-BnUz9YMx.js";import"./description-BoEneSfX.js";const L={name:"DocumentTypesCreateEdit",layout:F,props:{documentType:{type:Object,required:!1,default:()=>{}},documentCategories:{type:Object,required:!1,defualt:()=>{}},states:{type:Object,required:!1,defualt:()=>{}}},data(){return{form:N({name:"",description:"",document_category_id:"",state_ids:[]})}},watch:{documentType:{handler(s){!s||!s.data||(this.form.name=s.data.name,this.form.description=s.data.description,this.form.document_category_id=s.data.document_category_id,this.form.state_ids=s.data.states.map(n=>n.state_id))},immediate:!0}},methods:{submitForm(){this.form.clearErrors(),this.documentType&&this.documentType.data&&this.documentType.data.document_type_id?this.updateRequest():this.storeRequest()},storeRequest(){this.form.post(this.route("panel.document-types.store"),{onSuccess:()=>this.$toast().success("Document type created successfully!"),onError:s=>{Object.keys(s).forEach(n=>{const d=s[n];this.$toast().error(d)})}})},updateRequest(){this.form.patch(this.route("panel.document-types.update",{document_type:this.documentType.data.document_type_id}),{onSuccess:()=>this.$toast().success("Document type updated successfully!"),onError:s=>{Object.keys(s).forEach(n=>{const d=s[n];this.$toast().error(d)})}})},deleteRequest(){this.$alert().confirm(()=>new Promise((s,n)=>{this.form.delete(this.route("panel.document-types.destroy",{document_type:this.documentType.data.document_type_id}),{onSuccess:()=>{this.$toast().success("Document type deleted successfully!"),s()},onError:d=>{Object.keys(d).forEach(v=>{const e=d[v];this.$toast().error(e)}),n()}})}))}}},G={class:"grid grid-cols-1 divide-y divide-gray-200 gap-12 pb-12"},M={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"},P=["value"];function z(s,n,d,v,e,T){const x=i("v-inertia-head"),V=i("v-section-heading"),h=i("v-content-body"),C=i("v-section-divider"),y=i("v-form-label"),E=i("v-form-input"),g=i("v-form-error"),f=i("v-form-group"),D=i("v-form-select"),q=i("v-form-textarea"),w=i("v-form-checkbox"),b=i("v-button"),S=i("v-form");return c(),l(_,null,[o(x,{title:d.documentType?`Editing '${d.documentType.data.name}' document type.`:"Create Document Type"},null,8,["title"]),o(S,{class:"h-full",onSubmit:R(T.submitForm,["prevent"])},{default:t(()=>[o(h,{class:"border-b border-gray-200"},{default:t(()=>[o(V,null,{title:t(()=>[d.documentType?(c(),l(_,{key:1},[r(" Editing '"+m(d.documentType.data.name)+"' document type. ",1)],64)):(c(),l(_,{key:0},[r(" Create Document Type ")],64))]),description:t(()=>[!d.documentType&&this.$auth().can(["document-type.destroy"])?(c(),l(_,{key:0},[r(" Fill up the form below to create a new document type for the application. ")],64)):(c(),l(_,{key:1},[r(" Change and/or modify the details for the document type. ")],64))]),_:1})]),_:1}),k("div",G,[o(f,{class:"divide-y divide-gray-200"},{default:t(()=>[o(C,null,{default:t(()=>[r(" General Details ")]),_:1}),o(h,{class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-4"},{default:t(()=>[o(f,{class:"col-span-full sm:col-span-1"},{default:t(()=>[o(y,null,{default:t(()=>[r("Name")]),_:1}),o(E,{type:"text",modelValue:e.form.name,"onUpdate:modelValue":n[0]||(n[0]=a=>e.form.name=a),error:e.form.errors.name,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.name?(c(),u(g,{key:0},{default:t(()=>[r(m(e.form.errors.name),1)]),_:1})):p("",!0)]),_:1}),o(f,{class:"col-span-full sm:col-span-1"},{default:t(()=>[o(y,null,{default:t(()=>[r("Document Category")]),_:1}),o(D,{options:d.documentCategories.data.map(a=>({label:a.name,value:a.document_category_id})),error:e.form.errors.document_category_id,disabled:e.form.processing,modelValue:e.form.document_category_id,"onUpdate:modelValue":n[1]||(n[1]=a=>e.form.document_category_id=a)},null,8,["options","error","disabled","modelValue"]),e.form.errors.document_category_id?(c(),u(g,{key:0},{default:t(()=>[r(m(e.form.errors.document_category_id),1)]),_:1})):p("",!0)]),_:1}),o(f,{class:"col-span-full"},{default:t(()=>[o(y,null,{default:t(()=>[r("Description")]),_:1}),o(q,{modelValue:e.form.description,"onUpdate:modelValue":n[2]||(n[2]=a=>e.form.description=a),error:e.form.errors.description,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.description?(c(),u(g,{key:0},{default:t(()=>[r(m(e.form.errors.description),1)]),_:1})):p("",!0)]),_:1}),o(f,{class:"col-span-full"},{default:t(()=>[o(y,null,{default:t(()=>[r("States")]),_:1}),k("div",M,[(c(!0),l(_,null,B(d.states.data,(a,j)=>(c(),u(w,{key:"state_"+j,modelValue:e.form.state_ids,"onUpdate:modelValue":n[3]||(n[3]=O=>e.form.state_ids=O),value:a.state_id,disabled:e.form.processing},{default:t(()=>[r(m(a.name),1)]),_:2},1032,["modelValue","value","disabled"]))),128))]),e.form.errors.state_ids?(c(),u(g,{key:0},{default:t(()=>[r(m(e.form.errors.state_ids),1)]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1})]),o(f,{class:"bg-gray-50 flex items-center justify-end gap-2 text-right border-t border-gray-200"},{default:t(()=>[o(h,{class:"flex gap-4"},{default:t(()=>[e.form.progress?(c(),l("progress",{key:0,value:e.form.progress.percentage,max:"100"},m(e.form.progress.percentage)+"% ",9,P)):p("",!0),o(b,{href:s.route("panel.document-types.index"),color:"white",disabled:e.form.processing},{default:t(()=>[r(" Cancel ")]),_:1},8,["href","disabled"]),d.documentType?(c(),u(b,{key:2,disabled:e.form.processing},{default:t(()=>[r(" Save Changes ")]),_:1},8,["disabled"])):(c(),u(b,{key:1,disabled:e.form.processing},{default:t(()=>[r(" Create Document Type ")]),_:1},8,["disabled"]))]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64)}const X=U(L,[["render",z]]);export{X as default};
