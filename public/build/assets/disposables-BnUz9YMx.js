import{o as w}from"./keyboard-DTUPi9Wy.js";import{c as m,w as g,h as E}from"./focus-management-C4nM2lYB.js";import{B as f,x as L,y,q as h,G as $}from"./app-B3zO_ILq.js";function b(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function T(){return/Android/gi.test(window.navigator.userAgent)}function A(){return b()||T()}function l(e,r,t){m.isServer||f(n=>{document.addEventListener(e,r,t),n(()=>document.removeEventListener(e,r,t))})}function M(e,r,t){m.isServer||f(n=>{window.addEventListener(e,r,t),n(()=>window.removeEventListener(e,r,t))})}function H(e,r,t=y(()=>!0)){function n(o,d){if(!t.value||o.defaultPrevented)return;let i=d(o);if(i===null||!i.getRootNode().contains(i))return;let p=function s(u){return typeof u=="function"?s(u()):Array.isArray(u)||u instanceof Set?u:[u]}(e);for(let s of p){if(s===null)continue;let u=s instanceof HTMLElement?s:w(s);if(u!=null&&u.contains(i)||o.composed&&o.composedPath().includes(u))return}return!g(i,E.Loose)&&i.tabIndex!==-1&&o.preventDefault(),r(o,i)}let a=L(null);l("pointerdown",o=>{var d,i;t.value&&(a.value=((i=(d=o.composedPath)==null?void 0:d.call(o))==null?void 0:i[0])||o.target)},!0),l("mousedown",o=>{var d,i;t.value&&(a.value=((i=(d=o.composedPath)==null?void 0:d.call(o))==null?void 0:i[0])||o.target)},!0),l("click",o=>{A()||a.value&&(n(o,()=>a.value),a.value=null)},!0),l("touchend",o=>n(o,()=>o.target instanceof HTMLElement?o.target:null),!0),M("blur",o=>n(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}let v=Symbol("Context");var O=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(O||{});function j(){return C()!==null}function C(){return h(v,null)}function D(e){$(v,e)}function P(e){function r(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",r))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",r),r())}let c=[];P(()=>{function e(r){r.target instanceof HTMLElement&&r.target!==document.body&&c[0]!==r.target&&(c.unshift(r.target),c=c.filter(t=>t!=null&&t.isConnected),c.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function q(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(r=>setTimeout(()=>{throw r}))}function x(){let e=[],r={addEventListener(t,n,a,o){return t.addEventListener(n,a,o),r.add(()=>t.removeEventListener(n,a,o))},requestAnimationFrame(...t){let n=requestAnimationFrame(...t);r.add(()=>cancelAnimationFrame(n))},nextFrame(...t){r.requestAnimationFrame(()=>{r.requestAnimationFrame(...t)})},setTimeout(...t){let n=setTimeout(...t);r.add(()=>clearTimeout(n))},microTask(...t){let n={current:!0};return q(()=>{n.current&&t[0]()}),r.add(()=>{n.current=!1})},style(t,n,a){let o=t.style.getPropertyValue(n);return Object.assign(t.style,{[n]:a}),this.add(()=>{Object.assign(t.style,{[n]:o})})},group(t){let n=x();return t(n),this.add(()=>n.dispose())},add(t){return e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let a of e.splice(n,1))a()}},dispose(){for(let t of e.splice(0))t()}};return r}export{c as a,b,H as c,D as d,O as i,C as l,A as n,x as o,j as s,q as t,M as w};
