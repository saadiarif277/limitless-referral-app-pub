import{L as F}from"./index-D6YI7NWh.js";import{T as N,r as i,o as d,c as l,a as s,w as t,d as O,F as c,b as a,t as m,g as k,e as u,f as g,l as R}from"./app-B3zO_ILq.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focus-management-C4nM2lYB.js";import"./keyboard-DTUPi9Wy.js";import"./disposables-BnUz9YMx.js";import"./description-BoEneSfX.js";const D={name:"StatesCreateEdit",layout:F,props:{documentTypes:{type:Object,required:!1,defualt:()=>{}},state:{type:Object,required:!1,default:()=>{}}},data(){return{form:N({name:"",document_type_ids:[]})}},watch:{state:{handler(o){!o||!o.data||(this.form.name=o.data.name,this.form.document_type_ids=o.data.document_types.map(n=>n.document_type_id))},immediate:!0}},methods:{submitForm(){this.form.clearErrors(),this.state&&this.state.data&&this.state.data.state_id?this.updateRequest():this.storeRequest()},storeRequest(){this.form.post(this.route("panel.states.store"),{onSuccess:()=>this.$toast().success("State created successfully!"),onError:o=>{Object.keys(o).forEach(n=>{const r=o[n];this.$toast().error(r)})}})},updateRequest(){this.form.patch(this.route("panel.states.update",{state:this.state.data.state_id}),{onSuccess:()=>this.$toast().success("State updated successfully!"),onError:o=>{Object.keys(o).forEach(n=>{const r=o[n];this.$toast().error(r)})}})},deleteRequest(){this.$alert().confirm(()=>new Promise((o,n)=>{this.form.delete(this.route("panel.states.destroy",{state:this.state.data.id}),{onSuccess:()=>{this.$toast().success("State deleted successfully!"),o()},onError:r=>{Object.keys(r).forEach(y=>{const e=r[y];this.$toast().error(e)}),n()}})}))}}},L={class:"grid grid-cols-1 divide-y divide-gray-200 gap-12 pb-12"},U={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"},G=["value"];function M(o,n,r,y,e,x){const S=i("v-inertia-head"),E=i("v-section-heading"),p=i("v-content-body"),C=i("v-section-divider"),b=i("v-form-label"),V=i("v-form-input"),v=i("v-form-error"),_=i("v-form-group"),w=i("v-form-checkbox"),h=i("v-button"),q=i("v-form");return d(),l(c,null,[s(S,{title:r.state?`Editing '${r.state.data.name}' state.`:"Create State"},null,8,["title"]),s(q,{class:"h-full",onSubmit:O(x.submitForm,["prevent"])},{default:t(()=>[s(p,{class:"border-b border-gray-200"},{default:t(()=>[s(E,null,{title:t(()=>[r.state?(d(),l(c,{key:1},[a(" Editing '"+m(r.state.data.name)+"' state. ",1)],64)):(d(),l(c,{key:0},[a(" Create State ")],64))]),description:t(()=>[r.state?(d(),l(c,{key:1},[a(" Change and/or modify the details for the state. ")],64)):(d(),l(c,{key:0},[a(" Fill up the form below to create a new state for the application. ")],64))]),_:1})]),_:1}),k("div",L,[s(_,{class:"divide-y divide-gray-200"},{default:t(()=>[s(C,null,{default:t(()=>[a(" General Details ")]),_:1}),s(p,{class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-4"},{default:t(()=>[s(_,null,{default:t(()=>[s(b,null,{default:t(()=>[a("Name")]),_:1}),s(V,{type:"text",modelValue:e.form.name,"onUpdate:modelValue":n[0]||(n[0]=f=>e.form.name=f),error:e.form.errors.name,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.name?(d(),u(v,{key:0},{default:t(()=>[a(m(e.form.errors.name),1)]),_:1})):g("",!0)]),_:1}),s(_,{class:"col-span-full"},{default:t(()=>[s(b,null,{default:t(()=>[a("Document Types")]),_:1}),k("div",U,[(d(!0),l(c,null,R(r.documentTypes.data,(f,T)=>(d(),u(w,{key:"documentType_"+T,modelValue:e.form.document_type_ids,"onUpdate:modelValue":n[1]||(n[1]=j=>e.form.document_type_ids=j),value:f.document_type_id,disabled:e.form.processing},{default:t(()=>[a(m(f.name),1)]),_:2},1032,["modelValue","value","disabled"]))),128))]),e.form.errors.documentType_ids?(d(),u(v,{key:0},{default:t(()=>[a(m(e.form.errors.documentType_ids),1)]),_:1})):g("",!0)]),_:1})]),_:1})]),_:1})]),s(_,{class:"bg-gray-50 flex items-center justify-end gap-2 text-right border-t border-gray-200"},{default:t(()=>[s(p,{class:"flex gap-4"},{default:t(()=>[e.form.progress?(d(),l("progress",{key:0,value:e.form.progress.percentage,max:"100"},m(e.form.progress.percentage)+"% ",9,G)):g("",!0),s(h,{href:o.route("panel.states.index"),color:"white",disabled:e.form.processing},{default:t(()=>[a(" Cancel ")]),_:1},8,["href","disabled"]),r.state?(d(),u(h,{key:2,disabled:e.form.processing},{default:t(()=>[a(" Save Changes ")]),_:1},8,["disabled"])):(d(),u(h,{key:1,disabled:e.form.processing},{default:t(()=>[a(" Create State ")]),_:1},8,["disabled"]))]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64)}const Q=B(D,[["render",M]]);export{Q as default};
