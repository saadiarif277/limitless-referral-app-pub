import{L as T}from"./index-D6YI7NWh.js";import{T as A,r as c,o as i,c as b,a as o,g as O,w as r,d as N,F as y,b as l,t as m,f as a,e as u,l as C,n as M}from"./app-B3zO_ILq.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focus-management-C4nM2lYB.js";import"./keyboard-DTUPi9Wy.js";import"./disposables-BnUz9YMx.js";import"./description-BoEneSfX.js";const H={name:"UsersCreateEdit",layout:T,props:{clinics:{type:Object,required:!1,default:()=>{}},lawFirms:{type:Object,required:!1,default:()=>{}},medicalSpecialties:{type:Object,required:!1,default:()=>{}},organizationTypes:{type:Object,required:!1,default:()=>{}},roles:{type:Object,required:!1,default:()=>{}},states:{type:Object,required:!1,default:()=>{}},timezoneOptions:{type:Object,required:!0},user:{type:Object,required:!1,default:()=>{}},userTypes:{type:Object,required:!1,default:()=>{}}},data(){return{form:A({name:"",email:"",phone_number:"",birthdate:"",address_line_1:"",address_line_2:"",city:"",state_id:"",zip_code:"",timezone:"",gender:"",height:"",weight:"",password:"",password_confirmation:"",role_names:[],medical_specialty_id:"",user_type_id:"",organization_ids:[]})}},watch:{user:{handler(d){!d||!d.data||(this.form.name=d.data.name,this.form.email=d.data.email,this.form.phone_number=d.data.phone_number,this.form.birthdate=d.data.birthdate,this.form.address_line_1=d.data.address_line_1,this.form.address_line_2=d.data.address_line_2,this.form.city=d.data.city,this.form.state_id=d.data.state_id,this.form.zip_code=d.data.zip_code,this.form.timezone=d.data.timezone,this.form.gender=d.data.gender,this.form.height=d.data.height,this.form.weight=d.data.weight,this.form.role_names=d.data.roles,this.form.medical_specialty_id=d.data.medical_specialty_id,this.form.user_type_id=d.data.user_type_id,this.form.organization_ids=d.data.organization_ids,this.form.timezone=d.data.timezone)},immediate:!0}},methods:{submitForm(){this.form.clearErrors(),this.user&&this.user.data&&this.user.data.user_id?this.updateRequest():this.storeRequest()},storeRequest(){this.form.post(this.route("panel.users.store"),{onSuccess:()=>this.$toast().success("User created successfully!"),onError:d=>{Object.keys(d).forEach(t=>{const f=d[t];this.$toast().error(f)})}})},updateRequest(){this.form.patch(this.route("panel.users.update",{user:this.user.data.user_id}),{onSuccess:()=>this.$toast().success("User updated successfully!"),onError:d=>{Object.keys(d).forEach(t=>{const f=d[t];this.$toast().error(f)})}})},deleteRequest(){this.$alert().confirm(()=>new Promise((d,t)=>{this.form.delete(this.route("panel.users.destroy",{user:this.user.data.user_id}),{onSuccess:()=>{this.$toast().success("User deleted successfully!"),d()},onError:f=>{Object.keys(f).forEach(q=>{const e=f[q];this.$toast().error(e)}),t()}})}))}}},I={class:"h-full flex flex-col"},W={key:0,class:"flex gap-2"},Z={class:"grid grid-cols-1 divide-y divide-gray-200 gap-12 pb-12"},J={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},K=["value"];function Q(d,t,f,q,e,j){const R=c("v-inertia-head"),w=c("v-button"),L=c("v-section-heading"),h=c("v-content-body"),V=c("v-section-divider"),p=c("v-form-label"),g=c("v-form-input"),_=c("v-form-error"),n=c("v-form-group"),v=c("v-form-select"),U=c("v-table-header"),x=c("v-table-row"),E=c("v-table-data"),S=c("v-form-checkbox"),B=c("v-table"),D=c("v-form");return i(),b(y,null,[o(R,{title:f.user?`Editing '${f.user.data.name}' user.`:"Create User"},null,8,["title"]),O("div",I,[o(D,{onSubmit:N(j.submitForm,["prevent"])},{default:r(()=>[o(h,{class:"border-b border-gray-200"},{default:r(()=>[o(L,null,{title:r(()=>[f.user?(i(),b(y,{key:1},[l(" Editing '"+m(f.user.data.name)+"' user. ",1)],64)):(i(),b(y,{key:0},[l(" Create User ")],64))]),description:r(()=>[f.user?(i(),b(y,{key:1},[l(" Change and/or modify the details for the user. ")],64)):(i(),b(y,{key:0},[l(" Fill up the form below to create a new user for the application. ")],64))]),actions:r(()=>[f.user&&this.$auth().can(["user.destroy"])?(i(),b("div",W,[o(w,{color:"danger",disabled:e.form.processing,onClick:N(j.deleteRequest,["prevent"])},{default:r(()=>[l(" Delete User ")]),_:1},8,["disabled","onClick"])])):a("",!0)]),_:1})]),_:1}),O("div",Z,[o(n,{class:"divide-y divide-gray-200"},{default:r(()=>[o(V,null,{default:r(()=>[l(" General Details ")]),_:1}),o(h,{class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-4"},{default:r(()=>[o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("Name")]),_:1}),o(g,{type:"text",modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=s=>e.form.name=s),error:e.form.errors.name,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.name?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.name),1)]),_:1})):a("",!0)]),_:1}),o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("Email")]),_:1}),o(g,{type:"text",modelValue:e.form.email,"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.email=s),error:e.form.errors.email,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.email?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.email),1)]),_:1})):a("",!0)]),_:1}),o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("Phone Number")]),_:1}),o(g,{type:"text",modelValue:e.form.phone_number,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.phone_number=s),error:e.form.errors.phone_number,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.phone_number?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.phone_number),1)]),_:1})):a("",!0)]),_:1}),o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("Birthdate")]),_:1}),o(g,{type:"date",modelValue:e.form.birthdate,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.birthdate=s),error:e.form.errors.birthdate,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.birthdate?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.birthdate),1)]),_:1})):a("",!0)]),_:1})]),_:1})]),_:1}),o(n,{class:"divide-y divide-gray-200"},{default:r(()=>[o(V,null,{default:r(()=>[l(" Location Details ")]),_:1}),o(h,{class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-4"},{default:r(()=>[o(n,{class:"md:col-span-2"},{default:r(()=>[o(p,null,{default:r(()=>[l("Address Line 1 ")]),_:1}),o(g,{type:"text",modelValue:e.form.address_line_1,"onUpdate:modelValue":t[4]||(t[4]=s=>e.form.address_line_1=s),error:e.form.errors.address_line_1,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.address_line_1?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.address_line_1),1)]),_:1})):a("",!0)]),_:1}),o(n,{class:"md:col-span-2"},{default:r(()=>[o(p,null,{default:r(()=>[l("Address Line 2")]),_:1}),o(g,{type:"text",modelValue:e.form.address_line_2,"onUpdate:modelValue":t[5]||(t[5]=s=>e.form.address_line_2=s),error:e.form.errors.address_line_2,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.address_line_2?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.address_line_2),1)]),_:1})):a("",!0)]),_:1}),o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("City")]),_:1}),o(g,{type:"text",modelValue:e.form.city,"onUpdate:modelValue":t[6]||(t[6]=s=>e.form.city=s),error:e.form.errors.city,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.city?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.city),1)]),_:1})):a("",!0)]),_:1}),o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("State")]),_:1}),o(v,{options:f.states.data.map(s=>({label:s.name,value:s.state_id})),error:e.form.errors.state_id,disabled:e.form.processing,modelValue:e.form.state_id,"onUpdate:modelValue":t[7]||(t[7]=s=>e.form.state_id=s)},null,8,["options","error","disabled","modelValue"]),e.form.errors.state_id?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.state_id),1)]),_:1})):a("",!0)]),_:1}),o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("Zip Code")]),_:1}),o(g,{type:"text",modelValue:e.form.zip_code,"onUpdate:modelValue":t[8]||(t[8]=s=>e.form.zip_code=s),error:e.form.errors.zip_code,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.zip_code?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.zip_code),1)]),_:1})):a("",!0)]),_:1}),o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("Timezone")]),_:1}),o(v,{options:Object.entries(f.timezoneOptions).map(([s,k])=>({label:k,value:s})),error:e.form.errors.timezone,disabled:e.form.processing,modelValue:e.form.timezone,"onUpdate:modelValue":t[9]||(t[9]=s=>e.form.timezone=s)},null,8,["options","error","disabled","modelValue"]),e.form.errors.timezone?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.timezone),1)]),_:1})):a("",!0)]),_:1})]),_:1})]),_:1}),o(n,{class:"divide-y divide-gray-200"},{default:r(()=>[o(V,null,{default:r(()=>[l(" Personal Health Details ")]),_:1}),o(h,{class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-4"},{default:r(()=>[o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("Gender")]),_:1}),o(v,{options:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}],error:e.form.errors.gender,disabled:e.form.processing,modelValue:e.form.gender,"onUpdate:modelValue":t[10]||(t[10]=s=>e.form.gender=s)},null,8,["error","disabled","modelValue"]),e.form.errors.gender?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.gender),1)]),_:1})):a("",!0)]),_:1}),o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("Height")]),_:1}),o(g,{type:"text",modelValue:e.form.height,"onUpdate:modelValue":t[11]||(t[11]=s=>e.form.height=s),error:e.form.errors.height,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.height?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.height),1)]),_:1})):a("",!0)]),_:1}),o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("Weight")]),_:1}),o(g,{type:"text",modelValue:e.form.weight,"onUpdate:modelValue":t[12]||(t[12]=s=>e.form.weight=s),error:e.form.errors.weight,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.weight?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.weight),1)]),_:1})):a("",!0)]),_:1})]),_:1})]),_:1}),o(n,{class:"divide-y divide-gray-200"},{default:r(()=>[o(V,null,{default:r(()=>[l(" Organization Access ")]),_:1}),o(n,null,{default:r(()=>[o(B,{class:"border-gray-200"},{default:r(()=>[o(x,null,{default:r(()=>[o(U,{class:"hidden md:table-cell"},{default:r(()=>[l("Organization Type")]),_:1}),o(U,{class:"border-l border-gray-200"},{default:r(()=>[l("Organization Name")]),_:1})]),_:1}),(i(!0),b(y,null,C(f.organizationTypes.data,(s,k)=>(i(),b(y,{key:"organizationType_"+k},[s.organizations&&s.organizations.length?(i(),b(y,{key:0},[o(x,null,{default:r(()=>[o(U,{colspan:"100%"},{default:r(()=>[l(m(s.name),1)]),_:2},1024)]),_:2},1024),(i(!0),b(y,null,C(s.organizations,(z,F)=>(i(),u(x,{key:"organization_"+F},{default:r(()=>[o(E,{class:M(["hidden md:table-cell",parseInt(F)+1<parseInt(s.organizations.length)?"border-white border-b":""])},null,8,["class"]),o(E,{class:"border-l border-b border-gray-200"},{default:r(()=>[o(S,{modelValue:e.form.organization_ids,"onUpdate:modelValue":t[13]||(t[13]=P=>e.form.organization_ids=P),value:z.organization_id,disabled:e.form.processing},{default:r(()=>[l(m(z.name),1)]),_:2},1032,["modelValue","value","disabled"])]),_:2},1024)]),_:2},1024))),128))],64)):a("",!0)],64))),128))]),_:1}),e.form.errors.organization_type_ids?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.organization_type_ids),1)]),_:1})):a("",!0)]),_:1})]),_:1}),o(n,{class:"divide-y divide-gray-200"},{default:r(()=>[o(V,null,{default:r(()=>[l(" Access & Security ")]),_:1}),o(h,{class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-4"},{default:r(()=>[o(n,{class:"md:col-span-2"},{default:r(()=>[o(p,null,{default:r(()=>[l("Password")]),_:1}),o(g,{type:"password",modelValue:e.form.password,"onUpdate:modelValue":t[14]||(t[14]=s=>e.form.password=s),error:e.form.errors.password,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.password?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.password),1)]),_:1})):a("",!0)]),_:1}),o(n,{class:"md:col-span-2"},{default:r(()=>[o(p,null,{default:r(()=>[l("Password Confirmation")]),_:1}),o(g,{type:"password",modelValue:e.form.password_confirmation,"onUpdate:modelValue":t[15]||(t[15]=s=>e.form.password_confirmation=s),error:e.form.errors.password_confirmation,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.password_confirmation?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.password_confirmation),1)]),_:1})):a("",!0)]),_:1}),o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("User Type")]),_:1}),o(v,{options:f.userTypes.data.map(s=>({label:s.name,value:s.user_type_id})),error:e.form.errors.user_type_id,disabled:e.form.processing,modelValue:e.form.user_type_id,"onUpdate:modelValue":t[16]||(t[16]=s=>e.form.user_type_id=s)},null,8,["options","error","disabled","modelValue"]),e.form.errors.user_type_id?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.user_type_id),1)]),_:1})):a("",!0)]),_:1}),o(n,null,{default:r(()=>[o(p,null,{default:r(()=>[l("Medical Specialty")]),_:1}),o(v,{options:f.medicalSpecialties.data.map(s=>({label:s.name,value:s.medical_specialty_id})),error:e.form.errors.medical_specialty_id,disabled:e.form.processing,modelValue:e.form.medical_specialty_id,"onUpdate:modelValue":t[17]||(t[17]=s=>e.form.medical_specialty_id=s)},null,8,["options","error","disabled","modelValue"]),e.form.errors.medical_specialty_id?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.medical_specialty_id),1)]),_:1})):a("",!0)]),_:1}),o(n,{class:"col-span-full"},{default:r(()=>[o(p,null,{default:r(()=>[l("Roles")]),_:1}),O("div",J,[(i(!0),b(y,null,C(f.roles.data,(s,k)=>(i(),u(S,{key:"role_"+k,modelValue:e.form.role_names,"onUpdate:modelValue":t[18]||(t[18]=z=>e.form.role_names=z),value:s.name,disabled:e.form.processing},{default:r(()=>[l(m(s.name),1)]),_:2},1032,["modelValue","value","disabled"]))),128))]),e.form.errors.roles?(i(),u(_,{key:0},{default:r(()=>[l(m(e.form.errors.roles),1)]),_:1})):a("",!0)]),_:1})]),_:1})]),_:1})]),o(n,{class:"bg-gray-50 flex items-center justify-end gap-2 text-right border-t border-gray-200"},{default:r(()=>[o(h,{class:"flex gap-4"},{default:r(()=>[e.form.progress?(i(),b("progress",{key:0,value:e.form.progress.percentage,max:"100"},m(e.form.progress.percentage)+"% ",9,K)):a("",!0),o(w,{href:d.route("panel.users.index"),color:"white",disabled:e.form.processing},{default:r(()=>[l(" Cancel ")]),_:1},8,["href","disabled"]),f.user?(i(),u(w,{key:2,disabled:e.form.processing},{default:r(()=>[l(" Save Changes ")]),_:1},8,["disabled"])):(i(),u(w,{key:1,disabled:e.form.processing},{default:r(()=>[l(" Create User ")]),_:1},8,["disabled"]))]),_:1})]),_:1})]),_:1},8,["onSubmit"])])],64)}const se=G(H,[["render",Q]]);export{se as default};
